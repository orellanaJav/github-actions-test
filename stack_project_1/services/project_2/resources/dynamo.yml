provider:
  region: us-east-1
  environment:
    THUMBNAIL_SIZE: "128"
    DYNAMODB_TABLE: ${self:custom.dynamotable}
    REGION_NAME: ${self:provider.region}

custom:
  baseName: ${opt:stage}-${self:service}
  dynamotable: image-url-tables
  bucket: paulo-gen-thumbnails
  pythonRequirements:
    # pythonBin: /opt/python3.8/bin/python
    dockerizePip: true

iam:
  role:
    statements:
      - Effect: "Allow"
        Resource: "*"
        Action: "s3:*"
      - Effect: Allow
        Action:
          - dynamodb:Query
          - dynamodb:Scan
          - dynamodb:GetItem
          - dynamodb:PutItem
          - dynamodb:UpdateItem
          - dynamodb:DeleteItem
        Resource: "arn:aws:dynamodb:${opt:region, self:provider.region}:*:table/${self:provider.environment.DYNAMODB_TABLE}"
